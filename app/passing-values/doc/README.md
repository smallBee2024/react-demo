# React 组件之间传值

## 一、父子组件通信（Parent → Child）

### 方法：props

这是最基础、最直接的方式。

> ✅ 适用于：父组件向子组件传递数据、回调函数等。

------

## 二、子父组件通信（Child → Parent）

### 方法：通过 props 传递回调函数

子组件调用父组件传下来的函数，将数据“传回”给父组件。

> ✅ 适用于：子组件需要通知父组件状态变化或事件触发。

------

## **三、兄弟组件通信（Sibling ↔ Sibling）**

兄弟组件之间**没有直接通信能力**，通常通过**共同的父组件**作为中介（“状态提升”）。

### 方法：状态提升（Lifting State Up）

1. 将共享状态提升到最近的公共父组件。
2. 父组件通过 props 将状态和更新函数分别传给两个子组件。

> ✅ 适用于：兄弟组件需要共享状态或互相响应。

------

## 四、其他进阶方案（适用于复杂场景）

虽然上述方法能满足大多数需求，但在大型应用中，还可以考虑以下方式：

| 场景           | 方法                                                | 说明                                     |
| :------------- | :-------------------------------------------------- | :--------------------------------------- |
| 跨多层组件通信 | **Context API**                                     | 避免“props drilling”，适合全局或深层传递 |
| 复杂状态管理   | **Redux / Zustand / Jotai**                         | 适用于全局状态、异步逻辑、持久化等       |
| 任意组件通信   | **自定义事件（EventEmitter）** 或 **发布-订阅模式** | 不推荐常规使用，易造成难以维护的副作用   |

### 示例：使用 Context 实现跨组件通信

省略

## 总结

| 通信方向    | 推荐方法                                    |
| :---------- | :------------------------------------------ |
| 父 → 子     | `props`                                     |
| 子 → 父     | `props` 传递回调函数                        |
| 兄弟 ↔ 兄弟 | **状态提升** 到公共父组件                   |
| 跨层级/全局 | `Context` 或状态管理库（如 Redux、Zustand） |

合理选择通信方式，有助于保持代码清晰、可维护。对于简单应用，优先使用 props 和状态提升；复杂应用再引入 Context 或状态管理库。